[
  {
    "objectID": "grafico6371.html",
    "href": "grafico6371.html",
    "title": "Criando gráfico de barras",
    "section": "",
    "text": "Criar gráfico de barras a partir dos dados estimados da tabela 6371.",
    "crumbs": [
      "Tabela 6371 - Média de horas habitualmente trabalhada",
      "Criando gráfico de barras"
    ]
  },
  {
    "objectID": "grafico6371.html#objetivo",
    "href": "grafico6371.html#objetivo",
    "title": "Criando gráfico de barras",
    "section": "",
    "text": "Criar gráfico de barras a partir dos dados estimados da tabela 6371.",
    "crumbs": [
      "Tabela 6371 - Média de horas habitualmente trabalhada",
      "Criando gráfico de barras"
    ]
  },
  {
    "objectID": "grafico6371.html#gráfico",
    "href": "grafico6371.html#gráfico",
    "title": "Criando gráfico de barras",
    "section": "Gráfico",
    "text": "Gráfico\nUsando o pacote ggplot2 é possível criar diversos tipos de gráfico. Os gráficos gerados com o ggplot2 usam como base dados no formato tidy. Dessa forma, usaremos os pacotes dplyr, tidyr e tidytext para formatar os dados obtidos anteriormente.\n\n# Carregando pacotes\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(tidytext)\n\n# Criando gráfico\n\ndf |&gt;\n  # Seleciona dados do segundo trimestre de 2024\n  filter(year == 2024, quarter == 2) |&gt; \n  # Agrupa por sexo\n  group_by(sexo) |&gt;\n  # Adequa formato/ordem das colunas \n  mutate(sexo = as.factor(sexo),\n         # Cria coluna para diferenciar Brasil de UFs para auxiliar nas cores do gráfico\n         tipo = ifelse(UF == \"Brasil\",\"Brasil\",\"UF\"),\n         # Ordena coluna UF pela média dentro dos grupos (sexo)\n         UF = reorder_within(UF,media,sexo)) |&gt; \n  ggplot() +\n  # Definindo o tipo de gráfico (colunas). Ordena as colunas com base no valor\n  geom_col(aes(y=UF, x = media, fill = tipo)) +\n  # Adicionando o texto com o valor em cada coluna\n  geom_text(aes(y=UF, x = media, label = round(media,1)), \n            color = 'white', fontface = 'bold',hjust = 1.1, size = 3.2) +\n  # Definindo a cor de preenchimento das colunas\n  scale_fill_manual(values = c(\"#ffbd7d\",'#004282')) +\n  # Usa escala reordenada para o eixo y\n  scale_y_reordered() +\n  # Altera o tema do gráfico para \"minimal\"\n  theme_minimal() +\n  # Adiciona facetas por sexo com escala livre\n  facet_wrap(~sexo, scales = 'free_y') +\n  # Adiciona título e subtitulo\n  labs(\n    title = 'Média de horas habitualmente trabalhadas por semana no trabalho principal',\n    subtitle = 'Pesquisa Nacional por Amostra de Domicílios Contínua Trimestral - Dados de 2023 e 2024'\n  ) +\n  # Faz ajustes no tema do gráfico\n  theme(legend.position = 'none',\n        axis.text = element_text(face = 'bold', size = 11,\n                                   colour = 'gray15'),\n        axis.title = element_blank(),\n        plot.title = element_text(face = 'bold', size = 18),\n        plot.subtitle = element_text(face = 'italic', size = 15),\n        plot.title.position = \"plot\", \n        plot.caption.position =  \"plot\",\n        strip.background = element_rect(fill = 'gray'),\n        strip.text = element_text(color = \"white\", face = \"bold\",size = 15)\n        ) \n\n\n\n\n\n\n\n\nUsando o comando ggsave() é possível salvar a imagem em PNG.\n\nggsave('grafico1.png',dpi = 600,width = 9,height = 7)",
    "crumbs": [
      "Tabela 6371 - Média de horas habitualmente trabalhada",
      "Criando gráfico de barras"
    ]
  },
  {
    "objectID": "tabela6471.html",
    "href": "tabela6471.html",
    "title": "Reproduzindo a tabela",
    "section": "",
    "text": "Reproduzir tabela 6471, que apresenta o Rendimento médio mensal real das pessoas de 14 anos ou mais de idade ocupadas na semana de referência com rendimento de trabalho, habitualmente recebido no trabalho principal.",
    "crumbs": [
      "Tabela 6471 - Rendimento médio",
      "Reproduzindo a tabela"
    ]
  },
  {
    "objectID": "tabela6471.html#objetivo",
    "href": "tabela6471.html#objetivo",
    "title": "Reproduzindo a tabela",
    "section": "",
    "text": "Reproduzir tabela 6471, que apresenta o Rendimento médio mensal real das pessoas de 14 anos ou mais de idade ocupadas na semana de referência com rendimento de trabalho, habitualmente recebido no trabalho principal.",
    "crumbs": [
      "Tabela 6471 - Rendimento médio",
      "Reproduzindo a tabela"
    ]
  },
  {
    "objectID": "tabela6471.html#estimando-valores",
    "href": "tabela6471.html#estimando-valores",
    "title": "Reproduzindo a tabela",
    "section": "Estimando valores",
    "text": "Estimando valores\nUsando a função svyby, é possível calcular estimativas para vários domínios. Dessa forma, vamos calcular a média da variável VD4019 para os domínios da variável VD009.\n\nVD009 - Posição na ocupação e categoria do emprego do trabalho principal da semana de referência para pessoas de 14 anos ou mais de idade;\nVD4019 - Rendimento mensal habitual de todos os trabalhos para pessoas de 14 anos ou mais de idade (apenas para pessoas que receberam em dinheiro, produtos ou mercadorias em qualquer trabalho);\n\nTambém podemos calcular variáveis de rendimento deflacionadas. Multiplicando o rendimento pelas variáveis Habitual ou Efetivo, podemos obter estimativas sob o valor real.\n\n# Carregando pacotes----------------------------------------------------------------------------\nlibrary(PNADcIBGE)\nlibrary(survey)\n\n# Definindo parâmetros------------------------------------------------------------------------\n# Cria tabela com periodos de interesse (anos e trimestres)\nperiodos &lt;- expand.grid(year = 2023:2024, quarter = 1:4)\nperiodos &lt;- periodos[order(periodos$year, periodos$quarter), ]\nperiodos &lt;- periodos[1:6,]\n\ndados$variables$Efetivo\n# Define variáveis de interesse da PNADc\nvariaveis_selecionadas &lt;- c(\"VD4009\", \"VD4019\")\n\n# Importando dados e estimando valores de interesse -----------------------------------------\n# Cria data frame para armazenar resultados\ndf &lt;- data.frame()\n\n# Cria looping iterando sobre os trimestres selecionados\nfor(i in 1:nrow(periodos)){\n  # Importando dados\n   dados = get_pnadc(year = periodos$year[i], quarter = periodos$quarter[i],\n                    vars = variaveis_selecionadas)\n  \n   \n   # Transformando a variável para valores reais usando o deflator\n   dados$variables = transform(dados$variables, VD4019_real = VD4019*Habitual)\n  \n  # Estimando valores\n  ## O resultado apresenta duas linhas. A primeira contém \"Pessoas na força de trabalho\" e a\n  ## segunda \"Pessoas fora da força de trabalho\".\n  resultado &lt;- svyby(~VD4019_real, ~VD4009, dados, svymean, na.rm = TRUE)\n  \n  # Estimando CV\n  cv = cv(resultado)\n  \n  # Criando data frame temporário com resultados do trimestre\n  df_temp &lt;- data.frame(\n    year = rep(periodos$year[i], 10),\n    quarter = rep(periodos$quarter[i], 10),\n    ocupacao = resultado[1],\n    taxa = resultado[2],\n    cv = cv[1])\n  \n  # Gravando resultados no data frame\n  df &lt;- rbind(df, df_temp)\n  \n  # Remove dados da do trimestre da memória\n  remove(dados)\n}",
    "crumbs": [
      "Tabela 6471 - Rendimento médio",
      "Reproduzindo a tabela"
    ]
  },
  {
    "objectID": "tabela6471.html#tabela",
    "href": "tabela6471.html#tabela",
    "title": "Reproduzindo a tabela",
    "section": "Tabela",
    "text": "Tabela\nUsando o pacote gt é possível formatar uma tabela para exibir os valores calculados.\n\n# Carregando pacote\nlibrary(gt)\n\n# Criando tabela\ngt(df) |&gt; \n tab_header(\n   title = \"6471 - Rendimento médio mensal real das pessoas de 14 anos ou mais de idade ocupadas na semana de referência com rendimento de trabalho, habitualmente recebido no trabalho principal\",\n   subtitle = \"Variável - Rendimento médio mensal real das pessoas de 14 anos ou mais de idade ocupadas na semana de referência com rendimento de trabalho, habitualmente recebido no trabalho principal\"\n ) |&gt; \n  cols_label(\n   year = \"Ano\",\n   quarter = \"Trimestre\",\n   VD4009 = \"Ocupação\",\n   VD4019_real = \"Renda média\",\n   cv = \"Coeficiente de Variação\"\n ) |&gt; \n  fmt_percent(\n    columns = c(cv),\n    decimals = 2) |&gt; \n  fmt_number(\n    columns = c(VD4019_real),\n    decimals = 2\n  ) |&gt; \n  opt_interactive()\n\n\n\n\n6471 - Rendimento médio mensal real das pessoas de 14 anos ou mais de idade ocupadas na semana de referência com rendimento de trabalho, habitualmente recebido no trabalho principal\nVariável - Rendimento médio mensal real das pessoas de 14 anos ou mais de idade ocupadas na semana de referência com rendimento de trabalho, habitualmente recebido no trabalho principal",
    "crumbs": [
      "Tabela 6471 - Rendimento médio",
      "Reproduzindo a tabela"
    ]
  },
  {
    "objectID": "tabela5917.html",
    "href": "tabela5917.html",
    "title": "Reproduzindo a tabela",
    "section": "",
    "text": "Reproduzir tabela 5917 apresenta a População total, por sexo.",
    "crumbs": [
      "Tabela 5917 - População total",
      "Reproduzindo a tabela"
    ]
  },
  {
    "objectID": "tabela5917.html#objetivo",
    "href": "tabela5917.html#objetivo",
    "title": "Reproduzindo a tabela",
    "section": "",
    "text": "Reproduzir tabela 5917 apresenta a População total, por sexo.",
    "crumbs": [
      "Tabela 5917 - População total",
      "Reproduzindo a tabela"
    ]
  },
  {
    "objectID": "tabela5917.html#estimando-valores",
    "href": "tabela5917.html#estimando-valores",
    "title": "Reproduzindo a tabela",
    "section": "Estimando valores",
    "text": "Estimando valores\nPara estimar a massa de rendimento, usaremos a tabela svytotal, que estima o total de uma determinada variável.\n\n# Carregando pacotes----------------------------------------------------------------------------\nlibrary(PNADcIBGE)\nlibrary(survey)\n\n# Definindo parâmetros------------------------------------------------------------------------\n# Cria tabela com periodos de interesse (anos e trimestres)\nperiodos &lt;- expand.grid(year = 2023:2024, quarter = 1:4)\nperiodos &lt;- periodos[order(periodos$year, periodos$quarter), ]\nperiodos &lt;- periodos[1:6,]\n\n# Define variáveis de interesse da PNADc\nvariaveis_selecionadas &lt;- c(\"V2007\")\n\n# Importando dados e estimando valores de interesse -----------------------------------------\n# Cria data frame para armazenar resultados\ndf &lt;- data.frame()\n\n# Cria looping iterando sobre os trimestres selecionados\nfor(i in 1:nrow(periodos)){\n  # Importando dados\n  dados = get_pnadc(year = periodos$year[i], quarter = periodos$quarter[i],\n                    vars = variaveis_selecionadas)\n  \n  # Estimando valores para homens e mulheres\n  resultado &lt;- svytotal(~V2007, design=dados, na.rm=TRUE)\n \n  # Estimando CV\n  cv = cv(resultado)\n  \n  # Criando data frame temporário com resultados do trimestre\n  df_temp &lt;- data.frame(\n    year = periodos$year[i],\n    quarter = periodos$quarter[i],\n    total_homem = resultado[1],\n    total_mulher = resultado[2],\n    cv_homem = cv[1],\n    cv_mulher = cv[2])\n  \n  # Gravando resultados no data frame\n  df &lt;- rbind(df, df_temp)\n  \n  # Remove dados da do trimestre da memória\n  remove(dados)\n}",
    "crumbs": [
      "Tabela 5917 - População total",
      "Reproduzindo a tabela"
    ]
  },
  {
    "objectID": "tabela5917.html#tabela",
    "href": "tabela5917.html#tabela",
    "title": "Reproduzindo a tabela",
    "section": "Tabela",
    "text": "Tabela\nUsando o pacote gt é possível formatar uma tabela para exibir os valores calculados.\n\n# Carregando pacote\nlibrary(gt)\nlibrary(dplyr)\n\n\nAnexando pacote: 'dplyr'\n\n\nOs seguintes objetos são mascarados por 'package:stats':\n\n    filter, lag\n\n\nOs seguintes objetos são mascarados por 'package:base':\n\n    intersect, setdiff, setequal, union\n\n# Criando tabela\ndf |&gt; \n  group_by(year,quarter) |&gt;\n  mutate(total = sum(total_homem,total_mulher)/1000,\n         total_homem = total_homem/1000,\n         total_mulher = total_mulher/1000) |&gt; \n  select(year,quarter,total,total_homem,total_mulher,cv_homem,cv_mulher) |&gt; \ngt() |&gt; \n tab_header(\n   title = \"Tabela 5917 - População, por sexo\",\n   subtitle = \"Variável - população (Mil pessoas)\"\n ) |&gt; \n  cols_label(\n   year = \"Ano\",\n   quarter = \"Trimestre\",\n   total = \"Total\",\n   total_homem = \"Homens\",\n   total_mulher = \"Mulheres\",\n   cv_homem = \"CV Homens\",\n   cv_mulher = \"CV Mulheres\"\n ) |&gt; \n  fmt_percent(\n    columns = c(cv_homem,cv_mulher),\n    decimals = 2) |&gt; \n  fmt_number(\n    columns = c(total,total_homem,total_mulher),\n    decimals = 0\n  ) |&gt; \n  opt_interactive()\n\n\n\n\nTabela 5917 - População, por sexo\nVariável - população (Mil pessoas)",
    "crumbs": [
      "Tabela 5917 - População total",
      "Reproduzindo a tabela"
    ]
  },
  {
    "objectID": "tabela4099.html",
    "href": "tabela4099.html",
    "title": "Reproduzindo a tabela",
    "section": "",
    "text": "Reproduzir tabela 4099, que apresenta a Taxa de desocupação e de subutilização da força de trabalho, na semana de referência, das pessoas de 14 anos ou mais de idade.",
    "crumbs": [
      "Tabela 4099 - Taxa de desocupação",
      "Reproduzindo a tabela"
    ]
  },
  {
    "objectID": "tabela4099.html#objetivo",
    "href": "tabela4099.html#objetivo",
    "title": "Reproduzindo a tabela",
    "section": "",
    "text": "Reproduzir tabela 4099, que apresenta a Taxa de desocupação e de subutilização da força de trabalho, na semana de referência, das pessoas de 14 anos ou mais de idade.",
    "crumbs": [
      "Tabela 4099 - Taxa de desocupação",
      "Reproduzindo a tabela"
    ]
  },
  {
    "objectID": "tabela4099.html#estimando-valores",
    "href": "tabela4099.html#estimando-valores",
    "title": "Reproduzindo a tabela",
    "section": "Estimando valores",
    "text": "Estimando valores\nPara estimar taxas, usamos a função svyratio, definindo o numerados e o denominador.\n\n# Carregando pacotes----------------------------------------------------------------------------\nlibrary(PNADcIBGE)\nlibrary(survey)\n\n# Definindo parâmetros------------------------------------------------------------------------\n# Cria tabela com periodos de interesse (anos e trimestres)\nperiodos &lt;- expand.grid(year = 2023:2024, quarter = 1:4)\nperiodos &lt;- periodos[order(periodos$year, periodos$quarter), ]\nperiodos &lt;- periodos[1:6,]\n\n# Define variáveis de interesse da PNADc\nvariaveis_selecionadas &lt;- c(\"VD4002\",\"VD4001\")\n\n# Importando dados e estimando valores de interesse -----------------------------------------\n# Cria data frame para armazenar resultados\ndf &lt;- data.frame(periodos,taxa = NA, cv = NA)\n\n# Cria looping iterando sobre os trimestres selecionados\nfor(i in 1:nrow(periodos)){\n  # Importando dados\n  # dados = get_pnadc(year = periodos$year[i], quarter = periodos$quarter[i],\n  #                  vars = variaveis_selecionadas)\n  \n  dados = readRDS(paste0(\"c:/Users/Avell B155 MAX/Documents/pnadc\",\n                          periodos$year[i],periodos$quarter[i],\".RDS\"))\n  \n  # Estimando valores\n  ## O resultado apresenta duas linhas. A primeira contém \"Pessoas na força de trabalho\" e a\n  ## segunda \"Pessoas fora da força de trabalho\".\n  resultado = svyratio(numerator=~(VD4002==\"Pessoas desocupadas\"), \n                       denominator=~grepl(\"^Pessoas na\",VD4001), # A função grepl foi usada para evitar problemas de encoding com o \"ç\"\n                       design=dados, na.rm=TRUE)\n  \n  # Estimando CV\n  cv = cv(resultado)\n  \n  # Gravando resultados no data frame\n  df$taxa[df$year == periodos$year[i] & df$quarter == periodos$quarter[i]] = resultado[1] \n  df$cv[df$year == periodos$year[i] & df$quarter == periodos$quarter[i]] = cv[1] \n  \n  # Remove dados da do trimestre da memória\n  remove(dados)\n}",
    "crumbs": [
      "Tabela 4099 - Taxa de desocupação",
      "Reproduzindo a tabela"
    ]
  },
  {
    "objectID": "tabela4099.html#tabela",
    "href": "tabela4099.html#tabela",
    "title": "Reproduzindo a tabela",
    "section": "Tabela",
    "text": "Tabela\nUsando o pacote gt é possível formatar uma tabela para exibir os valores calculados.\n\n# Carregando pacote\nlibrary(gt)\n\n# Criando tabela\ngt(df) |&gt; \n tab_header(\n   title = \"Tabela 4099 - Taxas de desocupação e de subutilização da força de trabalho, na semana de referência, das pessoas de 14 anos ou mais de idade\",\n   subtitle = \"Variável - Taxa de desocupação, na semana de referência, das pessoas de 14 anos ou mais de idade (%)\"\n ) |&gt; \n  cols_label(\n   year = \"Ano\",\n   quarter = \"Trimestre\",\n   taxa = \"Taxa\",\n   cv = \"Coeficiente de Variação\"\n ) |&gt; \n  fmt_percent(\n    columns = c(taxa,cv),\n    decimals = 1) |&gt; \n  opt_interactive()\n\n\n\n\nTabela 4099 - Taxas de desocupação e de subutilização da força de trabalho, na semana de referência, das pessoas de 14 anos ou mais de idade\nVariável - Taxa de desocupação, na semana de referência, das pessoas de 14 anos ou mais de idade (%)",
    "crumbs": [
      "Tabela 4099 - Taxa de desocupação",
      "Reproduzindo a tabela"
    ]
  },
  {
    "objectID": "grafico6471.html",
    "href": "grafico6471.html",
    "title": "Criando gráfico de barras",
    "section": "",
    "text": "Criar gráfico de barras a partir dos dados estimados da tabela 6471.",
    "crumbs": [
      "Tabela 6471 - Rendimento médio",
      "Criando gráfico de barras"
    ]
  },
  {
    "objectID": "grafico6471.html#objetivo",
    "href": "grafico6471.html#objetivo",
    "title": "Criando gráfico de barras",
    "section": "",
    "text": "Criar gráfico de barras a partir dos dados estimados da tabela 6471.",
    "crumbs": [
      "Tabela 6471 - Rendimento médio",
      "Criando gráfico de barras"
    ]
  },
  {
    "objectID": "grafico6471.html#gráfico",
    "href": "grafico6471.html#gráfico",
    "title": "Criando gráfico de barras",
    "section": "Gráfico",
    "text": "Gráfico\nUsando o pacote ggplot2 é possível criar diversos tipos de gráfico. Os gráficos gerados com o ggplot2 usam como base dados no formato tidy. Dessa forma, usaremos os pacotes dplyr, tidyr e forcats para formatar os dados obtidos anteriormente.\n\n# Carregando pacotes\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(ggplot2)\n\n# Criando gráfico\n\ndf |&gt; \n  # Cria coluna com trimestre e ano\n  mutate(trimestre = paste(year,quarter,sep = \" - \")) |&gt; \n  ggplot() +\n  # Definindo o tipo de gráfico (colunas). Ordena as colunas com base no valor\n  geom_col(aes(y=forcats::fct_reorder(VD4009, VD4019_real),\n               x = VD4019_real, fill = '1')) +\n  # Adicionando o texto com o valor em cada coluna\n  geom_text(aes(y=forcats::fct_reorder(VD4009, VD4019_real),\n                x = VD4019_real, label = round(VD4019_real)), \n            color = 'white', fontface = 'bold',hjust = 1.1, size = 3.2) +\n  # Definindo a cor de preenchimento das colunas\n  scale_fill_manual(values = '#004282') +\n  # Adiciona quebra de texto nas categorias com mais de 50 caracteres\n  scale_y_discrete(labels = function(x) stringr::str_wrap(x, width = 50)) +\n  # Altera o tema do gráfico para \"minimal\"\n  theme_minimal() +\n  # Adiciona facetas por ano e trimestre\n  facet_wrap(facets = vars(trimestre)) +\n  # Adiciona título e subtitulo\n  labs(\n    title = 'Rendimento médio mensal real das pessoas de 14 anos ou mais por tipo de ocupação',\n    subtitle = 'Pesquisa Nacional por Amostra de Domicílios Contínua Trimestral - Dados de 2023 e 2024'\n  ) +\n  # Faz ajustes no tema do gráfico\n  theme(legend.position = 'none',\n        axis.text = element_text(face = 'bold', size = 11,\n                                   colour = 'gray15'),\n        axis.title = element_blank(),\n        plot.title = element_text(face = 'bold', size = 18),\n        plot.subtitle = element_text(face = 'italic', size = 15),\n        plot.title.position = \"plot\", \n        plot.caption.position =  \"plot\",\n        strip.background = element_rect(fill = 'gray'),\n        strip.text = element_text(color = \"white\", face = \"bold\",size = 15)\n        ) \n\n\n\n\n\n\n\n\nUsando o comando ggsave() é possível salvar a imagem em PNG.\n\nggsave('grafico1.png',dpi = 600,width = 9,height = 7)",
    "crumbs": [
      "Tabela 6471 - Rendimento médio",
      "Criando gráfico de barras"
    ]
  },
  {
    "objectID": "mapa6471.html",
    "href": "mapa6471.html",
    "title": "Criando mapa",
    "section": "",
    "text": "Criar mapa a partir da reprodução da tabela tabela 6471 do SIDRA, através dos pacotes ggplot2 e geobr.",
    "crumbs": [
      "Tabela 6471 - Rendimento médio",
      "Criando mapa"
    ]
  },
  {
    "objectID": "mapa6471.html#objetivo",
    "href": "mapa6471.html#objetivo",
    "title": "Criando mapa",
    "section": "",
    "text": "Criar mapa a partir da reprodução da tabela tabela 6471 do SIDRA, através dos pacotes ggplot2 e geobr.",
    "crumbs": [
      "Tabela 6471 - Rendimento médio",
      "Criando mapa"
    ]
  },
  {
    "objectID": "mapa6471.html#estimando-valores",
    "href": "mapa6471.html#estimando-valores",
    "title": "Criando mapa",
    "section": "Estimando valores",
    "text": "Estimando valores\nPara criar o mapa, precisamos estimar o rendimento médio por estado. Usaremos a função svyby novamente.\n\n# Carregando pacotes----------------------------------------------------------------------------\nlibrary(PNADcIBGE)\nlibrary(survey)\n\n# Define variáveis de interesse da PNADc\nvariaveis_selecionadas &lt;- c(\"VD4019\", \"UF\")\n\n# Importando dados e estimando valores de interesse -----------------------------------------\ndados =  get_pnadc(year = \"2024\", quarter = \"2\",\n                   vars = variaveis_selecionadas)\n\n\n# Estimando a renda por Estado\nrenda = svyby(~VD4019, ~UF, dados, svymean, na.rm = TRUE)",
    "crumbs": [
      "Tabela 6471 - Rendimento médio",
      "Criando mapa"
    ]
  },
  {
    "objectID": "mapa6471.html#gráfico",
    "href": "mapa6471.html#gráfico",
    "title": "Criando mapa",
    "section": "Gráfico",
    "text": "Gráfico\nUsando o pacote ggplot2 é possível criar diversos tipos de gráfico. Com o pacote geobr é possível baixar dados especiais brasileiros. Dessa forma, usaremos os pacotes geobr, dplyr, tidyr e forcats para formatar os dados obtidos anteriormente.\n\n# Carregando pacotes\nlibrary(dplyr)\nlibrary(geobr)\nlibrary(ggplot2)\n\n# Baixando dados dos Estados\nestados = read_state(year=2020)\n\n# Juntando data frames\nestados = left_join(estados, renda, by = c('name_state' = 'UF'))\n\n# Alguns estados estão com acentuação diferente nos data frames \n# Ajustando dados\nestados$VD4019[estados$name_state=='Amazônas'] = renda$VD4019[renda$UF=='Amazonas']\nestados$VD4019[estados$name_state=='Rio Grande Do Norte'] = renda$VD4019[renda$UF=='Rio Grande do Norte']\nestados$VD4019[estados$name_state=='Rio Grande Do Sul'] = renda$VD4019[renda$UF=='Rio Grande do Sul']\nestados$VD4019[estados$name_state=='Mato Grosso Do Sul'] = renda$VD4019[renda$UF=='Mato Grosso do Sul']\nestados$VD4019[estados$name_state=='Rio De Janeiro'] = renda$VD4019[renda$UF=='Rio de Janeiro']\n\n# Criando gráfico\n\nggplot()+\n  # Definindo tipo do gráfico (mapa)\n  geom_sf(data=estados, aes(fill = as.numeric(VD4019)), colour=NA, size=.15)+\n  # Definindo cores usando escala viridis (acessível para dautônicos)\n  scale_fill_viridis_c(option = \"A\",name='Rendimento Médio',direction = -1) +\n  # Adicionando título\n  labs(title = 'Rendimento médio mensal habitual das pessoas de 14 anos ou mais',\n       subtitle = 'Segundo Trimestre de 2024',\n       caption = 'Pesquisa Nacional por Amostra de Domicílios Contínua Trimestral') +\n  # Alterando tema\n  theme_minimal() +\n  # Faz ajustes no tema do gráfico\n  theme(\n        plot.title = element_text(face = 'bold', size = 12),\n        plot.subtitle = element_text(face = 'italic', size = 9),\n        plot.title.position = \"plot\", \n        plot.caption.position =  \"plot\"\n        ) \n\n\n\n\n\n\n\n\nUsando o comando ggsave() é possível salvar a imagem em PNG.\n\nggsave('grafico1.png',dpi = 600,width = 9,height = 7)",
    "crumbs": [
      "Tabela 6471 - Rendimento médio",
      "Criando mapa"
    ]
  },
  {
    "objectID": "tabela5606.html",
    "href": "tabela5606.html",
    "title": "Reproduzindo a tabela",
    "section": "",
    "text": "Reproduzir tabela 5606 apresenta a Massa de rendimento mensal, na semana de referência, das pessoas de 14 anos ou mais de idade.",
    "crumbs": [
      "Tabela 5606 - Massa de rendimento",
      "Reproduzindo a tabela"
    ]
  },
  {
    "objectID": "tabela5606.html#objetivo",
    "href": "tabela5606.html#objetivo",
    "title": "Reproduzindo a tabela",
    "section": "",
    "text": "Reproduzir tabela 5606 apresenta a Massa de rendimento mensal, na semana de referência, das pessoas de 14 anos ou mais de idade.",
    "crumbs": [
      "Tabela 5606 - Massa de rendimento",
      "Reproduzindo a tabela"
    ]
  },
  {
    "objectID": "tabela5606.html#estimando-valores",
    "href": "tabela5606.html#estimando-valores",
    "title": "Reproduzindo a tabela",
    "section": "Estimando valores",
    "text": "Estimando valores\nPara estimar a massa de rendimento, usaremos a tabela svytotal, que estima o total de uma determinada variável.\n\n# Carregando pacotes----------------------------------------------------------------------------\nlibrary(PNADcIBGE)\nlibrary(survey)\n\n# Definindo parâmetros------------------------------------------------------------------------\n# Cria tabela com periodos de interesse (anos e trimestres)\nperiodos &lt;- expand.grid(year = 2023:2024, quarter = 1:4)\nperiodos &lt;- periodos[order(periodos$year, periodos$quarter), ]\nperiodos &lt;- periodos[1:6,]\n\n# Define variáveis de interesse da PNADc\nvariaveis_selecionadas &lt;- c(\"VD4019\")\n\n# Importando dados e estimando valores de interesse -----------------------------------------\n# Cria data frame para armazenar resultados\ndf &lt;- data.frame(periodos, total = NA, cv = NA)\n\n# Cria looping iterando sobre os trimestres selecionados\nfor(i in 1:nrow(periodos)){\n  # Importando dados\n  dados = get_pnadc(year = periodos$year[i], quarter = periodos$quarter[i],\n                    vars = variaveis_selecionadas)\n  \n  # Estimando valores\n  ## O resultado apresenta duas linhas. A primeira contém \"Pessoas na força de trabalho\" e a\n  ## segunda \"Pessoas fora da força de trabalho\".\n  resultado = svytotal(x = ~VD4019, design = dados, na.rm = TRUE)\n  \n  # Estimando CV\n  cv = cv(resultado)\n  \n  # Gravando resultados no data frame\n  df$total[df$year == periodos$year[i] & df$quarter == periodos$quarter[i]] = resultado[1] \n  df$cv[df$year == periodos$year[i] & df$quarter == periodos$quarter[i]] = cv[1] \n  \n  # Remove dados da do trimestre da memória\n  remove(dados)\n}",
    "crumbs": [
      "Tabela 5606 - Massa de rendimento",
      "Reproduzindo a tabela"
    ]
  },
  {
    "objectID": "tabela5606.html#tabela",
    "href": "tabela5606.html#tabela",
    "title": "Reproduzindo a tabela",
    "section": "Tabela",
    "text": "Tabela\nUsando o pacote gt é possível formatar uma tabela para exibir os valores calculados.\n\n# Carregando pacote\nlibrary(gt)\n\n# Criando tabela\ngt(df) |&gt; \n tab_header(\n   title = \"Tabela 5606 - Massa de rendimento mensal real das pessoas de 14 anos ou mais de idade ocupadas na semana de referência com rendimento de trabalho, habitualmente e efetivamente recebidos em todos os trabalhos\",\n   subtitle = \"Variável - Massa de rendimento mensal real das pessoas de 14 anos ou mais de idade ocupadas na semana de referência com rendimento de trabalho, habitualmente recebido em todos os trabalhos\"\n ) |&gt; \n  cols_label(\n   year = \"Ano\",\n   quarter = \"Trimestre\",\n   total = \"Total\",\n   cv = \"Coeficiente de Variação\"\n ) |&gt; \n  fmt_percent(\n    columns = c(cv),\n    decimals = 2) |&gt; \n  fmt_number(\n    columns = c(total),\n    decimals = 2\n  ) |&gt; \n  opt_interactive()\n\n\n\n\nTabela 5606 - Massa de rendimento mensal real das pessoas de 14 anos ou mais de idade ocupadas na semana de referência com rendimento de trabalho, habitualmente e efetivamente recebidos em todos os trabalhos\nVariável - Massa de rendimento mensal real das pessoas de 14 anos ou mais de idade ocupadas na semana de referência com rendimento de trabalho, habitualmente recebido em todos os trabalhos",
    "crumbs": [
      "Tabela 5606 - Massa de rendimento",
      "Reproduzindo a tabela"
    ]
  },
  {
    "objectID": "tabela6371.html",
    "href": "tabela6371.html",
    "title": "Reproduzindo a tabela",
    "section": "",
    "text": "Reproduzir tabela 6371, que apresenta a Média de horas habitualmente trabalhadas por semana e efetivamente trabalhadas na semana de referência, no trabalho principal e em todos os trabalhos, das pessoas de 14 anos ou mais de idade, por sexo e por Unidade da Federação.\nVariáveis utilizadas nas estimativas:\n\nUF - Unidade da Federação;\nV2007 - Sexo;\nVD4031 - Horas habitualmente trabalhadas;",
    "crumbs": [
      "Tabela 6371 - Média de horas habitualmente trabalhada",
      "Reproduzindo a tabela"
    ]
  },
  {
    "objectID": "tabela6371.html#objetivo",
    "href": "tabela6371.html#objetivo",
    "title": "Reproduzindo a tabela",
    "section": "",
    "text": "Reproduzir tabela 6371, que apresenta a Média de horas habitualmente trabalhadas por semana e efetivamente trabalhadas na semana de referência, no trabalho principal e em todos os trabalhos, das pessoas de 14 anos ou mais de idade, por sexo e por Unidade da Federação.\nVariáveis utilizadas nas estimativas:\n\nUF - Unidade da Federação;\nV2007 - Sexo;\nVD4031 - Horas habitualmente trabalhadas;",
    "crumbs": [
      "Tabela 6371 - Média de horas habitualmente trabalhada",
      "Reproduzindo a tabela"
    ]
  },
  {
    "objectID": "tabela6371.html#estimando-valores",
    "href": "tabela6371.html#estimando-valores",
    "title": "Reproduzindo a tabela",
    "section": "Estimando valores",
    "text": "Estimando valores\nPara estimar a média considerando a interação entre sexo e Unidade da Federação, usamos as funções svyby e interaction.\n\n# Carregando pacotes----------------------------------------------------------------------------\nlibrary(PNADcIBGE)\nlibrary(survey)\n\n# Definindo parâmetros------------------------------------------------------------------------\n# Cria tabela com periodos de interesse (anos e trimestres)\nperiodos &lt;- expand.grid(year = 2023:2024, quarter = 1:4)\nperiodos &lt;- periodos[order(periodos$year, periodos$quarter), ]\nperiodos &lt;- periodos[1:6,]\n\n# Define variáveis de interesse da PNADc\nvariaveis_selecionadas &lt;- c(\"UF\",\"V2007\",\"VD4031\")\n\n# Importando dados e estimando valores de interesse -----------------------------------------\n# Cria data frame para armazenar resultados\ndf &lt;- data.frame()\n\n# Cria looping iterando sobre os trimestres selecionados\nfor(i in 1:nrow(periodos)){\n  # Importando dados\n  # dados = get_pnadc(year = periodos$year[i], quarter = periodos$quarter[i],\n  #                  vars = variaveis_selecionadas)\n  \n  dados = readRDS(paste0(\"c://Users/03002433/Documents/pnadc\",\n                          periodos$year[i],periodos$quarter[i],\".RDS\"))\n  \n  # Estimando valores\n  ## Estimativas com interações de sexo e UF\n  resultado = svyby(formula=~VD4031,by =~interaction(V2007,UF),FUN=svymean,\n                       design=dados, na.rm=TRUE)\n  \n  ## Estimativas a nível nacional por sexo\n  resultado_total = svyby(formula=~VD4031,by =~V2007,FUN=svymean,\n                       design=dados, na.rm=TRUE)\n  \n  # Estimando CV\n  cv = as.data.frame(cv(resultado))\n  cv_total = as.data.frame(cv(resultado_total))\n  \n  # Criando data fame temporário\n  df_temp &lt;- data.frame(\n    year = periodos$year[i],\n    quarter = periodos$quarter[i],\n    interacao = resultado[[1]],\n    media = resultado[[2]],\n    cv = cv[[1]]\n    ) |&gt; \n    add_row(\n      year = periodos$year[i],\n      quarter = periodos$quarter[i],\n      interacao = c(\"Homem.Brasil\",\"Mulher.Brasil\"),\n      media = resultado_total[[2]],\n      cv = cv_total[[1]]\n    )\n  \n  # Gravando resultados no data frame\n  df &lt;- rbind(df, df_temp)\n  \n  # Remove dados da do trimestre da memória\n  remove(dados)\n}",
    "crumbs": [
      "Tabela 6371 - Média de horas habitualmente trabalhada",
      "Reproduzindo a tabela"
    ]
  },
  {
    "objectID": "tabela6371.html#formatando-os-dados",
    "href": "tabela6371.html#formatando-os-dados",
    "title": "Reproduzindo a tabela",
    "section": "Formatando os dados",
    "text": "Formatando os dados\nO data frame obtido com o código a cima apresenta a coluna interação que está no formato “sexo.UF”. Assim, usaremos a função separate do pacote tidyr para criar duas novas colunas.\n\n# Carrega pacote\nlibrary(tidyr)\n\n# Altera data frame\ndf &lt;- df |&gt; \n  separate(interacao,c(\"sexo\",\"UF\"), sep = \"\\\\.\")",
    "crumbs": [
      "Tabela 6371 - Média de horas habitualmente trabalhada",
      "Reproduzindo a tabela"
    ]
  },
  {
    "objectID": "tabela6371.html#tabela",
    "href": "tabela6371.html#tabela",
    "title": "Reproduzindo a tabela",
    "section": "Tabela",
    "text": "Tabela\nUsando o pacote gt é possível formatar uma tabela para exibir os valores calculados.\n\n# Carregando pacote\nlibrary(gt)\n\n# Criando tabela\ngt(df) |&gt; \n tab_header(\n   title = \"Tabela 6371 - Média de horas habitualmente trabalhadas por semana e efetivamente trabalhadas na semana de referência, no trabalho principal e em todos os trabalhos, das pessoas de 14 anos ou mais de idade, por sexo e por Unidade da Federação\",\n   subtitle = \"Variável - Média de horas habitualmente trabalhadas por semana no trabalho principal das pessoas de 14 anos ou mais de idade (Horas)\"\n ) |&gt; \n  cols_label(\n   year = \"Ano\",\n   quarter = \"Trimestre\",\n   sexo = \"Sexo\",\n   UF = \"Brasil e Unidades da Federação\",\n   media = \"Média\",\n   cv = \"Coeficiente de Variação\"\n ) |&gt; \n  fmt_number(\n    columns = media,\n    decimals = 1\n  ) |&gt; \n  fmt_percent(\n    columns = c(cv),\n    decimals = 1) |&gt; \n  opt_interactive()\n\n\n\n\nTabela 6371 - Média de horas habitualmente trabalhadas por semana e efetivamente trabalhadas na semana de referência, no trabalho principal e em todos os trabalhos, das pessoas de 14 anos ou mais de idade, por sexo e por Unidade da Federação\nVariável - Média de horas habitualmente trabalhadas por semana no trabalho principal das pessoas de 14 anos ou mais de idade (Horas)",
    "crumbs": [
      "Tabela 6371 - Média de horas habitualmente trabalhada",
      "Reproduzindo a tabela"
    ]
  }
]